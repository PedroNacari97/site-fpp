{% extends "admin_custom/base_admin.html" %}

{% block title %}Transferir pontos - {{ conta.programa.nome }}{% endblock %}
{% block header_title %}Transferir pontos - {{ conta.programa.nome }}{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6 flex-wrap gap-4">
    <div>
        <h3 class="text-xl font-semibold">Cliente: {{ conta.cliente.usuario.get_full_name|default:conta.cliente.usuario.username }}</h3>
        <p class="text-sm text-gray-600">Saldo atual: {{ conta.saldo_pontos }} pontos | Valor médio/milheiro: R$ {{ conta.valor_medio_por_mil|floatformat:2 }}</p>
    </div>
    <a href="{% url 'admin_movimentacoes' conta.id %}" class="bg-zinc-600 hover:bg-zinc-700 text-white px-4 py-2 rounded">Voltar</a>
</div>

<form method="post" class="space-y-4">
    {% csrf_token %}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <label class="form-label" for="{{ form.conta_origem.id_for_label }}">Conta de origem</label>
            {{ form.conta_origem }}
            {% if form.conta_origem.errors %}<div class="text-red-600 text-sm mt-1">{{ form.conta_origem.errors }}</div>{% endif %}
        </div>
        <div>
            <label class="form-label" for="{{ form.conta_destino.id_for_label }}">Conta de destino</label>
            {{ form.conta_destino }}
            {% if form.conta_destino.errors %}<div class="text-red-600 text-sm mt-1">{{ form.conta_destino.errors }}</div>{% endif %}
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
            <label class="form-label" for="{{ form.data.id_for_label }}">Data</label>
            {{ form.data }}
            {% if form.data.errors %}<div class="text-red-600 text-sm mt-1">{{ form.data.errors }}</div>{% endif %}
        </div>
        <div>
            <label class="form-label" for="{{ form.pontos.id_for_label }}">Pontos</label>
            {{ form.pontos }}
            {% if form.pontos.errors %}<div class="text-red-600 text-sm mt-1">{{ form.pontos.errors }}</div>{% endif %}
        </div>
        <div>
            <label class="form-label" for="{{ form.bonus_percentual.id_for_label }}">Bônus (%)</label>
            {{ form.bonus_percentual }}
            {% if form.bonus_percentual.errors %}<div class="text-red-600 text-sm mt-1">{{ form.bonus_percentual.errors }}</div>{% endif %}
        </div>
    </div>

    {% if form.non_field_errors %}
    <div class="p-3 rounded bg-red-100 text-red-800">
        {{ form.non_field_errors }}
    </div>
    {% endif %}

    <div class="form-actions">
        <button type="submit" class="btn-primary">Transferir</button>
    </div>
</form>
{% endblock %}
