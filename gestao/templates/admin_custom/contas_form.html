{% extends "admin_custom/base_admin.html" %}
{% load static %}
{% block title %}{% if form.instance.pk %}Editar Conta Fidelidade{% else %}Nova Conta Fidelidade{% endif %}{% endblock %}
{% block header_title %}{% if form.instance.pk %}Editar Conta Fidelidade{% else %}Nova Conta Fidelidade{% endif %}{% endblock %}
{% block menu_contas %}is-active{% endblock %}
{% block content %}
<div class="form-wrapper">
<form method="post">
    {% csrf_token %}
    {% if form.errors %}
    <div class="p-4 mb-4 rounded border border-red-200 bg-red-50 text-red-700">
        <p class="font-semibold mb-2">Não foi possível salvar. Corrija os pontos abaixo:</p>
        <ul class="list-disc pl-5 space-y-1">
            {% for field in form %}
                {% for error in field.errors %}
                    <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    <div class="form-title">{% if form.instance.pk %}Editar Conta Fidelidade{% else %}Nova Conta Fidelidade{% endif %}</div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.cliente.id_for_label }}">{{ form.cliente.label }}</label>
        {{ form.cliente }}
        {% if form.cliente.errors %}<div class="text-red-400 text-sm mt-1">{{ form.cliente.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.conta_administrada.id_for_label }}">{{ form.conta_administrada.label }}</label>
        {{ form.conta_administrada }}
        {% if form.conta_administrada.errors %}<div class="text-red-400 text-sm mt-1">{{ form.conta_administrada.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.programa.id_for_label }}">{{ form.programa.label }}</label>
        {{ form.programa }}
        {% if form.programa.errors %}<div class="text-red-400 text-sm mt-1">{{ form.programa.errors }}</div>{% endif %}
    </div>

    <div class="section-title">Credenciais do Programa</div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.login_programa.id_for_label }}">{{ form.login_programa.label }}</label>
        {{ form.login_programa }}
        {% if form.login_programa.errors %}<div class="text-red-400 text-sm mt-1">{{ form.login_programa.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.senha_programa.id_for_label }}">{{ form.senha_programa.label }}</label>
        {{ form.senha_programa }}
        {% if form.senha_programa.errors %}<div class="text-red-400 text-sm mt-1">{{ form.senha_programa.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.titular_programa_info.id_for_label }}">{{ form.titular_programa_info.label }}</label>
        {{ form.titular_programa_info }}
        {% if form.titular_programa_info.errors %}<div class="text-red-400 text-sm mt-1">{{ form.titular_programa_info.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.observacoes_programa.id_for_label }}">{{ form.observacoes_programa.label }}</label>
        {{ form.observacoes_programa }}
        {% if form.observacoes_programa.errors %}<div class="text-red-400 text-sm mt-1">{{ form.observacoes_programa.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.quantidade_cpfs_disponiveis.id_for_label }}">{{ form.quantidade_cpfs_disponiveis.label }}</label>
        {{ form.quantidade_cpfs_disponiveis }}
        <p class="text-sm text-gray-400 mt-1">Deixe vazio para ilimitado. Usaremos os CPFs dos passageiros para controlar o uso.</p>
        {% if form.quantidade_cpfs_disponiveis.errors %}<div class="text-red-400 text-sm mt-1">{{ form.quantidade_cpfs_disponiveis.errors }}</div>{% endif %}
    </div>

    <div class="section-title">Clube e Validade</div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.clube_periodicidade.id_for_label }}">{{ form.clube_periodicidade.label }}</label>
        {{ form.clube_periodicidade }}
        {% if form.clube_periodicidade.errors %}<div class="text-red-400 text-sm mt-1">{{ form.clube_periodicidade.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.pontos_clube_mes.id_for_label }}">{{ form.pontos_clube_mes.label }}</label>
        {{ form.pontos_clube_mes }}
        {% if form.pontos_clube_mes.errors %}<div class="text-red-400 text-sm mt-1">{{ form.pontos_clube_mes.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.valor_assinatura_clube.id_for_label }}">{{ form.valor_assinatura_clube.label }}</label>
        {{ form.valor_assinatura_clube }}
        {% if form.valor_assinatura_clube.errors %}<div class="text-red-400 text-sm mt-1">{{ form.valor_assinatura_clube.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.data_inicio_clube.id_for_label }}">{{ form.data_inicio_clube.label }}</label>
        {{ form.data_inicio_clube }}
        {% if form.data_inicio_clube.errors %}<div class="text-red-400 text-sm mt-1">{{ form.data_inicio_clube.errors }}</div>{% endif %}
    </div>
    <div class="form-group single">
        <label class="form-label" for="{{ form.validade.id_for_label }}">{{ form.validade.label }}</label>
        {{ form.validade }}
        {% if form.validade.errors %}<div class="text-red-400 text-sm mt-1">{{ form.validade.errors }}</div>{% endif %}
    </div>
    <div class="form-actions">
        <button type="submit" class="btn">Salvar</button>
    </div>
</form>
</div>
{% endblock %}
