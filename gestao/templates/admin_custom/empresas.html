{% extends "admin_custom/base_admin.html" %}
{% load static %}

{% block title %}Empresas{% endblock %}
{% block header_title %}Empresas{% endblock %}
{% block header_subtitle %}<p class="page-subtitle">Visão clara das empresas, perfis administrativos e limites de operadores.</p>{% endblock %}
{% block menu_empresas %}bg-[#2c5282]{% endblock %}
{% block header_actions %}
<a href="{% url 'admin_criar_empresa' %}" class="btn btn-primary">+ Nova Empresa</a>
{% endblock %}

{% block content %}
<section class="surface-card">
  <div class="section-heading">
    <div>
      <p class="eyebrow">Empresas</p>
      <h2 class="section-title">Organizações cadastradas</h2>
    </div>
  </div>
  <div class="table-wrapper">
    <table class="data-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Admin</th>
          <th>Limite de operadores</th>
          <th>Operadores atuais</th>
          <th>Clientes</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for info in empresas_info %}
        <tr>
          <td>{{ info.empresa.nome }}</td>
          <td>
            {{ info.empresa.admin.usuario.get_full_name|default:info.empresa.admin.usuario.username|default:"—" }}
          </td>
          <td>
            {{ info.empresa.limite_colaboradores|default:"0" }}
          </td>
          <td>
            {{ info.operadores }}
          </td>
          <td>
            {{ info.clientes }}
          </td>
          <td>
            {% if info.empresa.ativo %}<span class="pill pill-success">Ativa</span>{% else %}<span class="pill pill-danger">Inativa</span>{% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center text-red-500 py-4">Nenhuma empresa cadastrada.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
