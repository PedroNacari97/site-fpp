{% extends "admin_custom/base_admin.html" %}
{% load static %}

{% block title %}Empresas{% endblock %}
{% block header_title %}Empresas{% endblock %}
{% block menu_empresas %}bg-[#2c5282]{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-4">
  <a href="{% url 'admin_criar_empresa' %}" class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-medium">
    Nova Empresa
  </a>
</div>

<table class="min-w-full border border-zinc-200 text-sm">
  <thead class="bg-zinc-100 text-zinc-600">
    <tr>
      <th class="p-2 text-left font-medium">Nome</th>
      <th class="p-2 text-left font-medium">Admin</th>
      <th class="p-2 text-left font-medium">Limite de operadores</th>
      <th class="p-2 text-left font-medium">Operadores atuais</th>
      <th class="p-2 text-left font-medium">Clientes</th>
      <th class="p-2 text-left font-medium">Status</th>
    </tr>
  </thead>
  <tbody>
    {% for info in empresas_info %}
    <tr class="border-b border-zinc-100 hover:bg-zinc-50">
      <td class="p-2 text-zinc-700">{{ info.empresa.nome }}</td>
      <td class="p-2 text-zinc-700">
        {{ info.empresa.admin.usuario.get_full_name|default:info.empresa.admin.usuario.username|default:"â€”" }}
      </td>
      <td class="p-2 text-zinc-700">
        {{ info.empresa.limite_colaboradores|default:"0" }}
      </td>
      <td class="p-2 text-zinc-700">
        {{ info.operadores }}
      </td>
      <td class="p-2 text-zinc-700">
        {{ info.clientes }}
      </td>
      <td class="p-2 text-zinc-700">
        {% if info.empresa.ativo %}Ativa{% else %}Inativa{% endif %}
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="6" class="text-center text-red-500 py-4">Nenhuma empresa cadastrada.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}