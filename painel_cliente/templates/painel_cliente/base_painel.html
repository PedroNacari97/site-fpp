{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Painel do Cliente{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'painel_cliente/css/main.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <div class="app-shell">
        <div class="sidebar-overlay" data-sidebar-overlay></div>

        <aside class="sidebar" data-sidebar>
            <div class="sidebar-header">
                <a class="sidebar-brand" href="{% url 'painel_dashboard' %}">
                    <div class="sidebar-logo gradient-primary">âœˆï¸</div>
                    <span class="sidebar-title">NCfly</span>
                </a>
                <button class="icon-button sidebar-close" type="button" aria-label="Fechar menu" data-sidebar-close>
                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M6 6l12 12M18 6l-12 12" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                    </svg>
                </button>
            </div>

            <nav class="sidebar-nav">
                {% url 'painel_dashboard' as dashboard_url %}
                {% url 'painel_emissoes' as emissoes_url %}
                {% url 'painel_hoteis' as hoteis_url %}
                {% url 'login_custom' as login_url %}

                {% if request.user.is_authenticated %}
                    <a class="nav-item {% if request.path == dashboard_url %}is-active{% endif %}" href="{{ dashboard_url }}">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M3 12 12 3l9 9" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                            <path d="M9 21V9h6v12" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                        <span>Dashboard</span>
                    </a>
                    <a class="nav-item {% if request.path == emissoes_url %}is-active{% endif %}" href="{{ emissoes_url }}">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M4 4h16v16H4z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                            <path d="M8 2v4M16 2v4M4 10h16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                        <span>EmissÃµes</span>
                    </a>
                    <a class="nav-item {% if request.path == hoteis_url %}is-active{% endif %}" href="{{ hoteis_url }}">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M3 20h18" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                            <path d="M4 20V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v13" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                            <path d="M8 14h.01M12 14h.01M16 14h.01" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                        <span>HotÃ©is</span>
                    </a>
                {% else %}
                    <a class="nav-item {% if request.path == login_url %}is-active{% endif %}" href="{{ login_url }}">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                            <path d="M10 17l5-5-5-5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                            <path d="M15 12H3" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                        <span>Login</span>
                    </a>
                {% endif %}
            </nav>

            {% if request.user.is_authenticated %}
                <div class="sidebar-profile">
                    <div class="sidebar-profile__card">
                        <div class="sidebar-profile__avatar">
                            {{ request.user.get_full_name|default:request.user.username|slice:":2"|upper }}
                        </div>
                        <div class="sidebar-profile__info">
                            <p class="sidebar-profile__name">{{ request.user.get_full_name|default:request.user.username }}</p>
                            <p class="sidebar-profile__email">{{ request.user.email|default:"cliente@ncfly.com" }}</p>
                        </div>
                        <form action="{% url 'logout' %}" method="post">{% csrf_token %}
                            <button class="icon-button" type="submit" aria-label="Sair">â‹</button>
                        </form>
                    </div>
                </div>
            {% endif %}
        </aside>

        <div class="app-shell__content">
            <header class="app-header">
                <div class="app-header__left">
                    <button class="icon-button menu-button" type="button" aria-label="Abrir menu" data-sidebar-open>
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M4 6h16M4 12h16M4 18h16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                    </button>
                    <div>
                        <h2 class="app-header__title">
                            {% block page_title %}Painel do Cliente{% endblock %}
                        </h2>
                        {% block header_subtitle %}{% endblock %}
                    </div>
                </div>
                <div class="app-header__actions">
                    <div class="header-search">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                        </svg>
                        <input type="text" placeholder="Buscar..." aria-label="Buscar" />
                    </div>
                    {% block header_actions %}{% endblock %}
                    {% if request.user.is_authenticated %}
                        <span class="user-name">{{ request.user.get_full_name|default:request.user.username }}</span>
                        <button class="icon-button" type="button" data-theme-toggle aria-label="Alternar modo escuro">ğŸŒ™</button>
                    {% else %}
                        <button class="icon-button" type="button" data-theme-toggle aria-label="Alternar modo escuro">ğŸŒ™</button>
                    {% endif %}
                </div>
            </header>

            <main class="app-main">
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>
    <script src="{% static 'gestao/js/forms.js' %}" defer></script>
    <script type="module" src="{% static 'painel_cliente/js/app.js' %}" defer></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
