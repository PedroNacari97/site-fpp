{% extends 'painel_cliente/base_painel.html' %}

{% block title %}Painel do Cliente{% endblock %}
{% block page_title %}Painel do Cliente{% endblock %}

{% block content %}
    <div class="section-header">
        <h1>Bem-vindo, {{ request.user.first_name|default:request.user.username }}!</h1>
    </div>

    <h2 class="section-title">Programas de Fidelidade</h2>
     <div class="painel-cards programas-grid">
        {% for c in contas_info %}
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">{{ c.programa }}</h3>
            </div>
            <div class="card-content">
                <span class="label">Pontos acumulados</span>
                <span class="valor">{{ c.saldo_pontos }}</span>
                <span class="label">Valor total dos pontos</span>
                <span class="valor">R$ {{ c.valor_total|floatformat:2 }}</span>
                <span class="label">Valor médio por 1.000 pontos</span>
                <span class="valor">R$ {{ c.valor_medio|floatformat:2 }}</span>
                <span class="label">Valor de referência</span>
                <span class="valor">R$ {{ c.valor_referencia|floatformat:2 }}</span>
            </div>
            <div class="card-actions">
                <a class="btn btn--outline btn--sm" href="{% url 'movimentacoes_programa' c.id %}">Ver movimentações</a>
            </div>
        </div>
        {% empty %}
        <p class="muted-text">Nenhum programa cadastrado.</p>
        {% endfor %}
    </div>

    <h2 class="section-title">Emissões e Hotéis</h2>
    <div class="painel-cards">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Emissões</h3>
            </div>
            <div class="card-content">
                <span class="label">Quantidade total de emissões</span>
                <span class="valor">{{ qtd_emissoes }}</span>
                <span class="label">Valor de referência acumulado</span>
                <span class="valor">R$ {{ valor_total_referencia|floatformat:2 }}</span>
                <span class="label">Total de taxas</span>
                <span class="valor">R$ {{ valor_total_taxas|floatformat:2 }}</span>
                <span class="label">Valor total economizado</span>
                <span class="valor">R$ {{ valor_total_economizado|floatformat:2 }}</span>
            </div>
            <div class="card-actions">
                <a class="btn btn--outline btn--sm" href="{% url 'painel_emissoes' %}">Ver detalhes</a>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Hotéis</h3>
            </div>
            <div class="card-content">
                <span class="label">Quantidade de reservas de hotéis</span>
                <span class="valor">{{ qtd_hoteis }}</span>
                <span class="label">Valor de referência acumulado</span>
                <span class="valor">R$ {{ valor_total_hoteis_referencia|floatformat:2 }}</span>
                <span class="label">Valor total pago</span>
                <span class="valor">R$ {{ valor_total_hoteis|floatformat:2 }}</span>
                <span class="label">Valor total economizado</span>
                <span class="valor">R$ {{ valor_total_hoteis_economia|floatformat:2 }}</span>
            </div>
            <div class="card-actions">
                <a class="btn btn--outline btn--sm" href="{% url 'painel_hoteis' %}">Ver detalhes</a>
            </div>
        </div>
    </div>
{% endblock %}
